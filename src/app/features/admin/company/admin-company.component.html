<section class="company">
  <header class="header">
    <div class="header-content">
      <h1>Company Profile</h1>
      <p>Update organization identifiers, fiscal settings, and key contacts.</p>
    </div>
    <div class="status-chips">
      <mat-chip [color]="organization?.status === 'active' ? 'primary' : 'warn'" selected>
        {{ organization?.status | titlecase }}
      </mat-chip>
      <mat-chip selected>
        {{ organization?.planType | titlecase }} Plan
      </mat-chip>
    </div>
  </header>

  <section class="company-section">
    <h3 class="section-title">Company Information</h3>
    <mat-card class="company-card">
      <mat-card-header>
        <div class="card-title-with-icon">
          <mat-icon>business</mat-icon>
          <mat-card-title>Organization Details</mat-card-title>
        </div>
      </mat-card-header>
      <mat-card-content>
        <form [formGroup]="form" class="form">
      <mat-form-field appearance="outline">
        <mat-label>Company Name</mat-label>
        <input matInput formControlName="name" required />
        <mat-error *ngIf="form.get('name')?.hasError('required')">
          Company name is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>VAT Number</mat-label>
        <input matInput formControlName="vatNumber" />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Currency</mat-label>
        <input matInput formControlName="currency" />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Fiscal Year Start</mat-label>
        <input matInput type="date" formControlName="fiscalYearStart" />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Primary Contact</mat-label>
        <input matInput formControlName="contactPerson" />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Contact Email</mat-label>
        <input matInput type="email" formControlName="contactEmail" />
        <mat-error *ngIf="form.get('contactEmail')?.hasError('email')">
          Enter a valid email address
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Storage Quota (MB)</mat-label>
        <input matInput type="number" formControlName="storageQuotaMb" />
      </mat-form-field>

      <mat-form-field appearance="outline" class="full">
        <mat-label>Registered Address</mat-label>
        <textarea matInput rows="3" formControlName="address"></textarea>
      </mat-form-field>
        </form>
      </mat-card-content>
      <mat-card-actions align="end">
        <button mat-raised-button color="primary" (click)="save()" [disabled]="loading">
          <mat-progress-spinner
            *ngIf="loading"
            diameter="20"
            mode="indeterminate"
          ></mat-progress-spinner>
          <span *ngIf="!loading">Save Changes</span>
        </button>
      </mat-card-actions>
    </mat-card>
  </section>
</section>

