<div class="file-upload-container">
  <div
    class="upload-area"
    [class.dragging]="isDragging"
    [class.uploading]="uploading"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
  >
    <!-- Regular file input -->
    <input
      type="file"
      [accept]="accept"
      [multiple]="multiple"
      (change)="onFileSelected($event)"
      #fileInput
      style="display: none"
    />

    <!-- Camera input for mobile devices -->
    <input
      type="file"
      [accept]="accept"
      [multiple]="multiple"
      (change)="onFileSelected($event)"
      #cameraInput
      capture="environment"
      style="display: none"
    />

    <div *ngIf="!uploading" class="upload-content">
      <mat-icon class="upload-icon">cloud_upload</mat-icon>
      <p class="upload-text">
        <span class="desktop-only">Drag and drop files here, or </span>
        <button mat-button color="primary" (click)="fileInput.click()">
          <mat-icon>folder</mat-icon>
          Browse Files
        </button>
      </p>
      <p class="upload-text mobile-only" *ngIf="isMobile">
        <button mat-raised-button color="primary" (click)="cameraInput.click()">
          <mat-icon>camera_alt</mat-icon>
          Take Photo
        </button>
      </p>
      <p class="upload-hint">Accepted: {{ accept }}</p>
    </div>

    <div *ngIf="uploading" class="upload-content">
      <mat-spinner diameter="40"></mat-spinner>
      <p class="upload-text">{{ loadingMessage }}</p>
    </div>
  </div>

  <div *ngIf="uploadedFiles.length > 0" class="uploaded-files">
    <h4>Uploaded Files:</h4>
    <mat-list>
      <mat-list-item *ngFor="let file of uploadedFiles; let i = index">
        <mat-icon matListItemIcon>description</mat-icon>
        <div matListItemTitle>{{ file.fileName }}</div>
        <div matListItemLine>{{ (file.fileSize / 1024).toFixed(2) }} KB</div>
        <button
          mat-icon-button
          matListItemMeta
          (click)="removeFile(i)"
          color="warn"
        >
          <mat-icon>delete</mat-icon>
        </button>
      </mat-list-item>
    </mat-list>
  </div>
</div>

